<header class="header" [ngClass]="{ 'sidebar-collapsed': isSidebarCollapsed }">
  <div class="header-content">
    <div class="header-left">
      <h1 class="header-title">EasyInjection</h1>
    </div>

    <div class="header-right">
      <div class="search-container">
        <button class="search-button" (click)="onSearch()">
            <fa-icon [icon]="faSearch"></fa-icon>
          </button>

        <input 
          type="text" 
          class="search-input" 
          placeholder="Búsqueda de escaneos"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
        />
      </div>

      <div class="notification-container">
        <button class="notification-btn" (click)="toggleNotificationPanel()">
          <mat-icon
            [matBadge]="unreadCount"
            [matBadgeHidden]="unreadCount === 0"
            matBadgeColor="warn"
          >
            notifications
          </mat-icon>
        </button>

        <div class="notification-panel" *ngIf="showNotificationPanel">
          <div class="notification-header">
            <h3>Notificaciones</h3>
            <button
              class="mark-all-btn"
              (click)="markAllAsRead()"
              *ngIf="unreadCount > 0"
            >
              Marcar todas como leídas
            </button>
          </div>

          <div class="notification-list">
            <div
              *ngFor="let notification of notifications"
              class="notification-item"
              [class.unread]="!notification.leido"
              [class.deleting]="notification.deleting"
              (click)="markAsRead(notification)"
            >
              <div class="notification-icon" *ngIf="!notification.leido"></div>
              <div class="notification-content">
                <h4>{{ notification.titulo }}</h4>
                <p>{{ notification.mensaje }}</p>
                <span class="notification-time"
                  >{{ notification.fecha | date:'short' }}</span
                >
              </div>
              <button
                class="delete-btn"
                (click)="deleteNotification(notification._id, $event)"
              >
                <mat-icon>close</mat-icon>
              </button>
            </div>

            <div *ngIf="notifications.length === 0" class="no-notifications">
              <mat-icon>notifications_none</mat-icon>
              <p>No tienes notificaciones</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
